<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Cursus JavaScript - IIFE's (iffy)</title>
	<script>
		// Immediately Invoked Function Expression -
		// wordt uitgevoerd zodra hij is gedefinieerd.
		// Meer info: http://benalman.com/news/2010/11/immediately-invoked-function-expression/
		/*
		// 1. Standaardnotatie. Geen automatische uitvoering van functie
		function myFunc1(parameter1) {
			console.log('myFunc1 is uitgevoerd: ', parameter1);
			// do other useful stuff
		};

		// 1a. Functie aanroepen (zie console);
		myFunc1('Hello World');
		*/
		/*
		// 2. Functies kun je aanroepen met (). Dus dit zal ook goed gaan?
		function myFunc2(parameter2){
			console.log('myFunc2 is uitgevoerd: ', parameter2);
			// do other useful stuff
		}(); // Nee. SyntaxError: Unexpected token )
		*/
		/*
		// 3. Maar wel als je haakjes om de functiedefinitieplaats: Immediately invoked
		(function myFunc3(parameter3) {
			var username = 'Peter';
			console.log('myFunc3 is uitgevoerd: ', parameter3);
			console.log('username: ', username);

			// do other useful stuff
		})('Hello Universe');
		*/
		
			// 4. Dit principe kom je veel tegen in libraries die direct/zichzelf
			// moeten initialiseren. Bijvoorbeeld
			var myLib = (function () {

				var name = 'Private Name';
				var username = 'Peter';
				var onzeApi = 'http://blablab.nl/api/';
				var greet = function () {
					console.log('Hello', username);
				}

				var setUserName = function (newName) {
					username = newName;
				}

				var getName = function () {
					return username;
				}
				// retourneer een handle naar de functie. Zie ook: Modules.
				// Hier definieer je de Public API voor je object
				return {
					// notatie : public : private 
					greet: greet,
					baseUrl: onzeApi,
					setUsername: setUserName,
					getUsername : getName
				}
			})(); // iffy. myLib is nu direct en overal beschikbaar.

			myLib.greet();
		
	</script>

	<script>
		// Boek fungeert hier als class
		function Boek(title, author) {
			// dit is de constructor
			this.title = title;
			this.author = author;
			var self = this;
			//this.getTitle = function () {
			//	return self.title;
			//}

			//return {
			//	getTitle : this.getTitle
			//}
		}

		Boek.prototype.getTitle = function () {
			return this.title;
		}
		// nieuwe instantie van de klasse Boek
		var myBook = new Boek('Handboek Windows', 'Peter');

	</script>
</head>
<body>
	<h1>IIFE (iffy)</h1>
	// Immediately Invoked Function Expression -

</body>
</html>
